<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Media â†’ Markdown Converter</title>
  <link rel="stylesheet" href="styles.css">
  <!-- PDF.js for PDF text extraction -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <!-- Tesseract.js for OCR on images -->
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
  <!-- Marked.js for markdown preview -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <!-- html2pdf for PDF export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>
<body>
  <div class="app">
    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <h1>Media â†’ Markdown</h1>
        <span class="subtitle">Convert any media to Notion-ready Markdown</span>
      </div>
      <div class="header-right">
        <button id="btnThemeToggle" class="btn-icon" title="Toggle dark/light mode">
          <span class="icon-theme">â—‘</span>
        </button>
      </div>
    </header>

    <!-- Main Layout -->
    <div class="main-layout">
      <!-- Left Panel: Input -->
      <div class="panel panel-input">
        <div class="panel-header">
          <h2>Input</h2>
          <div class="input-tabs">
            <button class="tab active" data-tab="upload">Upload</button>
            <button class="tab" data-tab="paste">Paste</button>
            <button class="tab" data-tab="link">Link</button>
          </div>
        </div>

        <!-- Upload Tab -->
        <div class="tab-content active" id="tab-upload">
          <div class="drop-zone" id="dropZone">
            <div class="drop-zone-inner">
              <div class="drop-icon">ğŸ“‚</div>
              <p class="drop-primary">Drag & drop files here</p>
              <p class="drop-secondary">or click to browse</p>
              <p class="drop-formats">Images Â· PDF Â· Audio Â· Video</p>
              <input type="file" id="fileInput" multiple
                accept="image/*,application/pdf,audio/*,video/*,.md,.txt,.csv,.json">
            </div>
          </div>
        </div>

        <!-- Paste Tab -->
        <div class="tab-content" id="tab-paste">
          <textarea id="pasteArea" class="paste-area"
            placeholder="Paste text, image (Ctrl+V), or markdown content here..."></textarea>
          <button id="btnProcessPaste" class="btn btn-primary">Process Pasted Content</button>
        </div>

        <!-- Link Tab -->
        <div class="tab-content" id="tab-link">
          <div class="link-input-group">
            <input type="url" id="linkInput" class="input-link"
              placeholder="https://example.com/media-or-page">
            <button id="btnProcessLink" class="btn btn-primary">Fetch & Convert</button>
          </div>
          <p class="link-hint">Supports: YouTube, image URLs, web pages, direct media links</p>
        </div>

        <!-- File Queue -->
        <div class="file-queue" id="fileQueue">
          <h3>Processing Queue</h3>
          <div class="queue-list" id="queueList"></div>
        </div>

        <!-- Conversion Options -->
        <div class="options-panel">
          <h3>Options</h3>
          <div class="option-row">
            <label>
              <input type="checkbox" id="optOcr"> OCR on images (extract text)
            </label>
          </div>
          <div class="option-row">
            <label>
              <input type="checkbox" id="optEmbedImages" checked> Embed images as base64
            </label>
          </div>
          <div class="option-row">
            <label>
              <input type="checkbox" id="optNotionCompat" checked> Notion-compatible output
            </label>
          </div>
          <div class="option-row">
            <label>
              <input type="checkbox" id="optIncludeMeta" checked> Include metadata header
            </label>
          </div>
          <div class="option-row">
            <label for="titleInput">Document Title:</label>
            <input type="text" id="titleInput" class="input-title" placeholder="Auto-generated from filename">
          </div>
        </div>
      </div>

      <!-- Right Panel: Output -->
      <div class="panel panel-output">
        <div class="panel-header">
          <h2>Output</h2>
          <div class="output-tabs">
            <button class="out-tab active" data-out="markdown">Markdown</button>
            <button class="out-tab" data-out="preview">Preview</button>
          </div>
        </div>

        <!-- Markdown Source -->
        <div class="out-content active" id="out-markdown">
          <textarea id="markdownOutput" class="markdown-editor"
            placeholder="Converted markdown will appear here..."></textarea>
        </div>

        <!-- Preview -->
        <div class="out-content" id="out-preview">
          <div id="markdownPreview" class="markdown-preview"></div>
        </div>

        <!-- Export Bar -->
        <div class="export-bar">
          <button id="btnCopyMd" class="btn btn-export" title="Copy markdown to clipboard">
            ğŸ“‹ Copy MD
          </button>
          <button id="btnCopyNotion" class="btn btn-export" title="Copy Notion-optimized markdown">
            ğŸ“ Copy for Notion
          </button>
          <button id="btnDownloadMd" class="btn btn-export" title="Download as .md file">
            â¬‡ Download .md
          </button>
          <button id="btnDownloadPdf" class="btn btn-export" title="Download as PDF">
            ğŸ“„ Download PDF
          </button>
          <button id="btnClearAll" class="btn btn-danger" title="Clear everything">
            ğŸ—‘ Clear
          </button>
        </div>
      </div>
    </div>

    <!-- Status Bar -->
    <div class="status-bar" id="statusBar">
      <span id="statusText">Ready â€” drop, paste, or upload media to begin</span>
      <div class="progress-container" id="progressContainer" style="display:none">
        <div class="progress-bar" id="progressBar"></div>
      </div>
    </div>
  </div>

  <!-- Toast Notification -->
  <div id="toast" class="toast"></div>

  <script src="app.js"></script>
</body>
</html>
